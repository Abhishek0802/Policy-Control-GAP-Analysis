<!doctype html> 
<html>
<head>
  <meta charset="utf-8"/>
  <title>Analysis Results</title>
  <style>
    body { font-family: Arial; margin: 30px; max-width: 900px; }
    .box { border: 1px solid #ddd; padding: 16px; border-radius: 8px; margin-bottom: 20px; }
    .status { font-weight: bold; }
    pre { background: #f7f7f7; padding: 12px; overflow: auto; }
    a { text-decoration: none; }
  </style>
</head>
<body>

  <p><a href="/">← Back</a></p>

  {% if error %}
    <div class="box">
      <b>Error:</b> {{ error }}
    </div>
  {% endif %}

  {% if results %}
    <h2>Policy Comparison Results</h2>

    {% for r in results %}
      <div class="box">

        <h3>Requirement</h3>
        <pre>{{ r.requirement }}</pre>

        <p class="status">
          Final Status: {{ r.status }}
        </p>

        <!-- ✅ WHY SECTION (from interpreter.missing_elements) -->
        {% if r.why %}
          <h4>Why</h4>
          <ul>
            {% for w in r.why.split(";") %}
              <li>{{ w }}</li>
            {% endfor %}
          </ul>
        {% endif %}

        <!-- ✅ Risk Rating only (no narrative prose) -->
        {% if r.rating %}
          <p><b>Risk Rating:</b> {{ r.rating }}</p>
        {% endif %}

      </div>
    {% endfor %}
  {% else %}
    <div class="box">
      <p>No results to display.</p>
    </div>
  {% endif %}

</body>
</html>